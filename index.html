<html lang="en"><head>
  <meta charset="utf-8">
  <title>Hamsa</title>
  <meta name="description" content="A dead simple, data-binding & observable model.">
  <meta name="author" content="@soyjavi">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href='http://fonts.googleapis.com/css?family=Dosis:400,700|Righteous' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="http://getflexo.com/dist/flexo.css">
  <link rel="stylesheet" href="gh-pages/site.css">
  <link rel="stylesheet" href="https://raw.githubusercontent.com/isagalaev/highlight.js/master/src/styles/monokai_sublime.css">
  <link rel="icon" type="image/png" href="gh-pages/favicon.png">
</head>

<body data-flex="horizontal grow">
  <aside class="color white" data-column="2" data-flex="vertical">
    <header>hamsa <small>0.9.20</small></header>
    <ul data-flex="vertical" class="none" data-flex-grow="max">
      <li><strong>Basics</strong></li>
      <li><a href="#intro">Introduction</a></li>
      <li><a href="#install">Install</a></li>
      <li><a href="#define">Define</a></li>
      <li><a href="#instances">Instances</a></li>
      <li><a href="#observe">Observe</a></li>
      <li><a href="#find">Find</a></li>
      <li><strong>More</strong></li>
      <li><a target="_blank" href="https://github.com/soyjavi/hamsa">Contribute</a></li>
      <li><a target="_blank" href="https://github.com/soyjavi/hamsa/archive/0.9.20.zip">Download</a></li>
      <li><a target="_blank" href="https://github.com/soyjavi/hamsa/issues">Help</a></li>
    </ul>
    <footer data-flex="horizontal" data-flex-grow="min">
      <img src="http://cdn.tapquo.com/photos/soyjavi.jpg" /><small>by</small><a href="http://soyjavi.com" target="_blank">@soyjavi</a></footer>
  </aside>

  <article class="scroll">
    <div class="align center landing">
      <h1>hamsa</h1>
      <h5>A dead simple, data-binding & observable <span class="color theme">model</span>.</h5>
      <a href="https://github.com/soyjavi/hamsa/archive/0.9.20.zip" class="button">Download</a>
      <a href="https://github.com/soyjavi/hamsa" class="button">Github</a>
      <button disabled>bower|npm install <span class="color theme">hamsa</span></button>
    </div>

    <div class="bck dark">
      <div class="container">
        <section id="intro" class="row">
          <h6>IS <span class="color theme">hamsa</span> FOR YOU?</h6>
          <p>
            A revolution is coming. There’s a new addition to JavaScript that’s going to change everything you think you know about data-binding. It’s also going to change how many of your MVC libraries approach observing models for edits and updates. Are you ready for some sweet performance boosts to apps that care about property observation? <span class="color white">Object.observe()</span>, part of a future ECMAScript standard, is a method for asynchronously observing changes in JavaScript objects...without the need for a separate library. It allows an observer to receive a time-ordered sequence of change records which describe the set of changes which took place to a set of observed objects.
          </p>
          <p>
            Hamsa will help you use this new specification today. No need to worry if your browser supports <code>Object.Observe()</code> because Hamsa comes with a polyfill perfect for those older browsers. Anyway, it is much more than a polyfill. The main objective is to provide you with an object modeling javascript system for all your projects. You can create complex models and control all its mutations. It's time to start working with Hamsa...
          </p>
        </section>

        <section id="install" class="row">
          <h6><span class="color theme">INSTALL</span> AND USE hamsa</h6>
          <p>
            Hamsa is registered as a package with Bower. You can install the latest version of Hamsa with the command:
          </p>
          <pre class="active"><code>
bower install hamsa</code></pre>

          <p>
            This will install Hamsa to Bower's install directory, the default being bower_components. Within bower_components/hamsa/dist/ you will find a compressed release file. The Hamsa Bower package contains additional files besides the default distribution. In most cases you can ignore these files.
          </p>

          <p>
            The minimal setup to use Hamsa on a web page is linking to the library:
          </p>

          <pre class="active"><code class="javascript">
&lt;script src="/path/to/hamsa.js"&gt;&lt;/script&gt;</code></pre>


          <p>
            Hamsa is registered also as a Node package with NPM. You can install the latest version of Hamsa with the command:
          </p>
          <pre class="active"><code>
npm install hamsa</code></pre>

          <p>
            If you want to use Hamsa in your NodeJS project you only need to <code>require</code> the library after installing it via NPM:
          </p>

          <nav>
            <button data-language="coffeescript" class="active">.coffee</button>
            <button data-language="javascript">.js</button></nav>
          <pre class="active"><code class="coffeescript">
Hamsa = require "Hamsa"</code></pre>

          <pre><code class="javascript">
var Hamsa = require("Hamsa")</code></pre>
        </section>

        <!-- Define a Hamsa Class ------------------------------------------ -->
        <section id="define" class="row">
          <h6><span class="color theme">DEFINE</span> YOUR FIRST hamsa CLASS</h6>
          <p>
            Usually you find MVC frameworks where the model becomes complex and heavy over time. With Hamsa you won't have that feeling: the model does exactly what you need it to do without adhering to complex conventions. It is simple but powerful, let's see how to create one:
          </p>

          <nav>
            <button data-language="coffeescript" class="active">.coffee</button>
            <button data-language="javascript">.js</button></nav>
          <pre class="active"><code class="coffeescript">
class Contact extends Hamsa
  @define
    id              : type: String
    mail            : type: String
    username        : type: String
    avatar          : type: String, default: "http://gravatar.org"
    networks        : type: Object
    since           : type: Number, default: 2015
    created_at      : type: Date, default: new Date()</code></pre>

        <pre><code class="javascript">
var Contact = (function(_super) {
  _extends(Contact, _super);

  function Contact() {
    return Contact.__super__.constructor.apply(this, arguments);
  }

  Contact.define({
    id        : { type: String },
    mail      : { type: String },
    username  : { type: String },
    avatar    : { type: String, default: "http://gravatar.org" },
    networks  : { type: Object },
    since     : { type: Number, default: 2015 },
    created_at: { type: Date, default: new Date() }
  });

  return Contact;

})(Hamsa);</code></pre>
          <p>
            As you can see you have to use the inherited function <code>@define</code> for setting the fields you will have in your model. You must indicate the type of security you need and, if you can, set a default value. Easy, right?
          </p>
        </section>

        <!-- INSTANCES ----------------------------------------------------- -->
        <section id="instances" class="row">
          <h6>CREATING hamsa <span class="color theme">INSTANCES</span></h6>
          <p>
            Once you have defined your first Hamsa Class you can start creating new instances of it. As you'll be able to see it is really easy:
          </p>
          <nav>
            <button data-language="coffeescript" class="active">.coffee</button>
            <button data-language="javascript">.js</button></nav>
          <pre class="active"><code class="coffeescript">
contact = new Contact()
#> {avatar: "http://gravatar.org", since: 2015, created_at: Sat Mar 21 2015 16:21:04 GMT+0700 (ICT)}</code></pre>

          <pre><code class="javascript">
var contact = new Contact();
/*
{
  avatar    : "http://gravatar.org",
  since     : 2015,
  created_at: Sat Mar 21 2015 16:21:04 GMT+0700 (ICT)
}
*/</code></pre>
          <p>
            This is the simplest example, instantiating has no parameters but as you can see the default fields are filled. Now that we have our instance we can create, modify or delete their fields.
          </p>
          <nav>
              <button data-language="coffeescript" class="active">.coffee</button>
              <button data-language="javascript">.js</button></nav>
          <pre class="active"><code class="coffeescript">
contact.username = "@soyjavi"
contact.mail = "hi@soyjavi.com"
delete contact.since</code></pre>
          <pre><code class="javascript">
contact.username = "@soyjavi";
contact.mail = "hi@soyjavi.com";
delete contact.since;</code></pre>

          <p>Now we will create a new instance by setting values for certain fields:</p>
          <nav>
              <button data-language="coffeescript" class="active">.coffee</button>
              <button data-language="javascript">.js</button></nav>
          <pre class="active"><code class="coffeescript">
contact = new Contact username: "@soyjavi", since: 1980
#> {username: "@soyjavi", since: 1980, avatar: "http://gravatar.org", created_at: Sat Mar 21 2015 16:21:04 GMT+0700 (ICT)}</code></pre>

          <pre><code class="javascript">
var contact = new Contact({username: "@soyjavi", since: 1980});
/*
{
  username  : "@soyjavi",
  avatar    : "http://gravatar.org",
  since     : 1980,
  created_at: Sat Mar 21 2015 16:21:04 GMT+0700 (ICT)
}
*/</code></pre>
          <p>
            If you want to delete a particular instance you only have to use the <code>destroy</code> method and hamsa does the rest. In the next chapter we will learn to observe the mutations of both instances and classes.
          </p>
          <nav>
              <button data-language="coffeescript" class="active">.coffee</button>
              <button data-language="javascript">.js</button></nav>
          <pre class="active"><code class="coffeescript">
contact.destroy()
#> undefined</code></pre>

          <pre><code class="javascript">
contact.destroy;
/* > undefined */</code></pre>
        </section>


        <!-- OBSERVE ------------------------------------------------------- -->
        <section id="observe" class="row">
          <h6><span class="color theme">OBSERVE</span> YOUR hamsa CHANGES</h6>
          <p>
            Now that you know how to create your own Hamsa Classes and how to create instances of these, you should find out how you can see both mutations to Hamsa Classes and instances. We will begin to observe <code>Contact</code>, the Hamsa Class you have defined in our case. You only have to define a function to collect mutations and also set the mutations we want observe:
          </p>
          <nav>
            <button data-language="coffeescript" class="active">.coffee</button>
            <button data-language="javascript">.js</button></nav>
          <pre class="active"><code class="coffeescript">
Contact.observe (state) ->
  console.log "Contact.observe", state
, MUTATIONS = ["add", "delete"]</code></pre>
          <pre><code class="javascript">
var MUTATIONS = ["add", "delete"];

Contact.observe(function(state) {
  return console.log("Contact.observe", state);
}, MUTATIONS);</code></pre>
          <p>
            To start observing a Hamsa Class you just have to use the <code>observe</code> method. The first parameter is the callback function and the second one is an array of mutations that you want to observe. Now, you can create instances of your Hamsa Class and see how each new instance (if you have subscribed to the <code>"new"</code> mutation) leave a message on your console.
          </p>
          <nav>
            <button data-language="coffeescript" class="active">.coffee</button>
            <button data-language="javascript">.js</button></nav>
          <pre class="active"><code class="coffeescript">
contact = new Contact()
###
> Contact.observe {
  type  : "add",
  object: Object,
  ...}
###</code></pre>
          <pre><code class="javascript">
var contact = new Contact();
/*
> Contact.observe {
  type  : "add",
  object: Object,
  ...}
*/</code></pre>

          <p>
            If you have subscribed to the mutation <code>"delete"</code> you can delete any of your instances and watch as the observer reports on these deletions through your console.
          </p>
          <nav>
            <button data-language="coffeescript" class="active">.coffee</button>
            <button data-language="javascript">.js</button></nav>
          <pre class="active"><code class="coffeescript">
contact.destroy()
###
> Contact.observe {
  type  : "delete",
  object: Object,
  ...}
###</code></pre>
          <pre><code class="javascript">
contact.destroy();
/*
> Contact.observe {
  type  : "delete",
  object: Object,
  ...}
*/</code></pre>

          <p>
            As has been shown it is easy to observe the mutations of the Hamsa Class. Now you will learn to manage mutations in a particular instance: This can be achieved in two ways. The first is the same as the class using the <code>observe</code> method:
          </p>
          <nav>
            <button data-language="coffeescript" class="active">.coffee</button>
            <button data-language="javascript">.js</button></nav>
          <pre class="active"><code class="coffeescript">
callback = (state) -> console.log "#{state.object.username}.observe", state

contact.observe callback, ["add", "update"]</code></pre>
          <pre><code class="javascript">
var MUTATIONS = ["add", "update"];
var callback = function(state) {
  return console.log(state.object.username + ".observe", state);
};

contact.observe(callback, MUTATIONS);</code></pre>

          <p>
            The second way is to define the observer when creating the instance:
          </p>
          <nav>
            <button data-language="coffeescript" class="active">.coffee</button>
            <button data-language="javascript">.js</button></nav>
          <pre class="active"><code class="coffeescript">
javi = new Contact username: "@soyjavi", callback, ["add", "update"]</code></pre>
          <pre><code class="javascript">
var javi = new Contact({username: "@soyjavi"}, callback, ["add", "update"]);</code></pre>

          <p>
            Now also if you modify or create (remember you only observe mutations <code>"add"</code> and <code>"update"</code>) any of the fields of your instance, we shall see a reference to that change in your console:
          </p>
          <nav>
            <button data-language="coffeescript" class="active">.coffee</button>
            <button data-language="javascript">.js</button></nav>
          <pre class="active"><code class="coffeescript">
javi.username = "@javi"
###
> @javi.observe {
  type    : "update"
  name    : "username"
  oldValue: "@soyjavi"
  object  : Object
  ...}
###

javi.mail = "hi@soyjavi.com"
###
> @javi.observe {
  type    : "add"
  name    : "mail"
  object  : Object }
###</code></pre>
          <pre><code class="javascript">
javi.username = "@javi";
/*
> @javi.observe {
  type    : "update",
  name    : "username",
  oldValue: "@soyjavi",
  object  : Object,
  ...}
*/

javi.mail = "hi@soyjavi.com";
/*
> @javi.observe {
  type    : "add",
  name    : "mail",
  object  : Object }
*/</code></pre>

          <p>
            In our Hamsa Class definition before, we said that we want to know if any of the instances are destroyed (using the key <code>"delete"</code>). Well, now you will use the class method <code>destroyAll</code> to remove all instances and see the deletion of the same logged to your console:
          </p>
          <nav>
            <button data-language="coffeescript" class="active">.coffee</button>
            <button data-language="javascript">.js</button></nav>
          <pre class="active"><code class="coffeescript">
do Contact.destroyAll

###
> Contact.observe {type: "delete"...}
> Contact.observe {type: "delete"...}
###</code></pre>
          <pre><code class="javascript">
Contact.destroyAll()

/*
> Contact.observe {type: "delete"...}
> Contact.observe {type: "delete"...}
*/</code></pre>
        </section>

        <section id="find" class="row">
          <h6><span class="color theme">FIND</span> YOUR hamsa INSTANCES</h6>
          <p>
          Finally you will learn how to find instances of a particular Hamsa Class. To do this we will use the class method <code>find</code> which receives a selection criteria using a object and returns an array of instances that fulfill that function. To return all documents in a collection, omit this parameter or pass an empty object.
          </p>
          <nav>
            <button data-language="coffeescript" class="active">.coffee</button>
            <button data-language="javascript">.js</button></nav>
          <pre class="active"><code class="coffeescript">
Contact.find since: 2014, username: '@javi'

###
> [ {username: "@javi", ...} ]
###</code></pre>
          <pre><code class="javascript">
Contact.find({since: 2014, username: '@javi'});

/*
> [ {username: "@javi", ...} ]
*/</code></pre>

          <p>
            In case you want to find a particular instance you can use the class method <code>findOne</code>.
          </p>
          <nav>
            <button data-language="coffeescript" class="active">.coffee</button>
            <button data-language="javascript">.js</button></nav>
          <pre class="active"><code class="coffeescript">
Contact.findOne since: 2014

###
> {username: "@javi", ...}
###</code></pre>
          <pre><code class="javascript">
Contact.findBy({since: 2014});

/*
> {username: "@javi", ...}
*/</code></pre>

          <p>
            In case you want to find and modify a single instance you can use the class method <code>findAndModify</code>. This method recibes a document parameter with the embedded document fields.
            <ul>
              <li><strong>query</strong> <p>Optional. The selection criteria for the modification. The query field employs the same query selectors as used in the <code>find</code> method. Although the query may match multiple documents, <code>findAndModify</code> will only select one document to modify.</p></li>
              <li><strong>update</strong> <p>Must specify either the update field. Performs an update of the selected document.</p></li>
              <li><strong>upsert</strong> <p>Optional. When <code>true</code>, <code>findAndModify</code> creates a new instance if no document matches the query or if documents match the query.</p></li>
            </ul>
          </p>
          <nav>
            <button data-language="coffeescript" class="active">.coffee</button>
            <button data-language="javascript">.js</button></nav>
          <pre class="active"><code class="coffeescript">
Contact.findAndModify
  query : since: 2014, username: '@javi'
  update: username: '@soyjavi'
  upsert: true

###
> {username: '@soyjavi', ...}
###</code></pre>
          <pre><code class="javascript">
Contact.findAndModify({
  query : {since: 2014, username: '@javi'}
,
  update: {username: '@soyjavi'}
,
  upsert: true
});

/*
> {username: "@soyjavi", ...}
*/</code></pre>
        </section>
        <section data-flex="horizontal center wrap">
          <a href="https://github.com/soyjavi/hamsa/archive/0.9.20.zip" class="button">Download</a>
          <a href="https://github.com/soyjavi/hamsa" class="button">Github</a>
          <button disabled>bower|npm install <span class="color theme">hamsa</span></button>
        </section>
      </div>
    </div>
  </article>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
  <script src="gh-pages/site.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-61039977-1', 'auto');
    ga('send', 'pageview');
  </script>
</body>
</html>
