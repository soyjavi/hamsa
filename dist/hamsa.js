/**
 * hamsa - A dead simple, data-binding & observable model.
 * @version v0.7.8
 * @link    http://gethamsa.com
 * @author  Javi Jimenez Villar (http://soyjavi.com)
 * @license MIT
 */
(function(){"use strict";var e,t,r,n,o=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};e=["add","update","delete"],function(s){var i;return i=function(){function s(s,i,u){var c,a,l,f;null==s&&(s={}),null==u&&(u=e),this.constructor.className=this.constructor.name,this.constructor.records[this.uid=n()]=this,l=this.constructor.fields;for(a in l)c=l[a],(s[a]||null!=c["default"])&&("function"==typeof this[a]?this[a](s[a]||c["default"]):this[a]=t(s[a],c));this.callbacks=[],this.observers=[],null!=i?this.observe(i,u):!i&&o.call(null!=(f=this.constructor)?f.events:void 0,"update")>=0&&Object.observe(this,function(e){return function(t){var n,s,i,u,c;for(u=[],n=0,s=t.length;s>n;n++)c=t[n],i=c.name,o.call(e.constructor.names,i)>=0&&u.push(r(c,e.constructor));return u}}(this),["update"])}return s.records={},s.fields={},s.names=[],s.callbacks=[],s.observers=[],s.events=[],s.define=function(e){var t;return this.fields=null!=e?e:{},this.records={},this.names=function(){var e;e=[];for(t in this.fields)e.push(t);return e}.call(this),this},s.all=function(){return this.find()},s.destroyAll=function(){var e;for(e in this.records)delete this.records[e];return this.records},s.find=function(e){var t,r,n,o;r=this.records,n=[];for(o in r)t=r[o],(!e||e(t))&&n.push(t);return n},s.findBy=function(e,t){var r,n,o,s;n=this.records,o=[];for(s in n)r=n[s],r[e]===t&&o.push(r);return o},s.observe=function(t,r){var n;return this.events=null!=r?r:e,n=Object.observe(this.records,function(e){return function(r){var n,o,s,i,u,c;for(u=[],o=0,s=r.length;s>o;o++)c=r[o],e.records[c.name].constructor===e&&(n={type:c.type,name:c.name},"add"===(i=c.type)||"update"===i?n.object=e.records[c.name]:n.oldValue=c.oldValue,u.push(t(n)));return u}}(this),this.events),this.callbacks.push(t),this.observers.push(n)},s.unobserve=function(){var e,t,r,n;for(n=this.observers,e=0,t=n.length;t>e;e++)r=n[e],Object.unobserve(this.records,r);return this.callbacks=[],this.observers=[]},s.prototype.observe=function(t,n){var s;return null==n&&(n=e),s=Object.observe(this,function(e){return function(n){var s,i,u,c,a;for(c=[],s=0,i=n.length;i>s;s++)a=n[s],u=a.name,o.call(e.constructor.names,u)>=0&&(delete a.object.observer,r(a,e.constructor),c.push(t(a)));return c}}(this),n),this.callbacks.push(t),this.observers.push(s),s},s.prototype.unobserve=function(){var e,t,r,n;for(n=this.observers,e=0,t=n.length;t>e;e++)r=n[e],Object.unobserve(this,r);return this.callbacks=[],this.observers=[]},s.prototype.destroy=function(e){var t,r,n,o;if(null==e&&(e=!0),e)for(o=this.callbacks,r=0,n=o.length;n>r;r++)(t=o[r])({type:"destroy",name:this.uid,oldValue:this.fields()});return delete this.constructor.records[this.uid]},s.prototype.fields=function(){var e,t,r,n,o;for(o={},n=this.constructor.names,e=0,t=n.length;t>e;e++)r=n[e],o[r]=this[r];return o},s}(),"function"==typeof define&&define.amd?define(function(){return i}):s.Hamsa=i,"undefined"!=typeof module&&null!==module&&null!=module.exports?module.exports=i:void 0}(this),n=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t,r;return t=16*Math.random()|0,r="x"===e?t:3&t|8,r.toString(16)}).toUpperCase()},t=function(e,t){return t.type!==Date&&t.type!==Array?t.type(e||t["default"]):t.type===Array?e||t["default"]:e||t.type(t["default"])},r=function(e,t){var r,n,s,i,u,c;for(i=t.callbacks,c=[],n=0,s=i.length;s>n;n++)r=i[n],"update"===e.type&&(u=e.type,o.call(t.events,u)>=0)&&(delete e.object.observer,c.push(r(e)));return c},window._extends=function(e,t){var r,n;r=function(){this.constructor=e};for(n in t)_hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},window._hasProp={}.hasOwnProperty,Object.observe||function(t,r,n){var s,i,u,c,a,l,f,h,d,p;return e=["add","update","delete"],c=r.indexOf||function(e,t,n){return r.prototype.indexOf.call(e,t,n)},a=n.requestAnimationFrame||n.webkitRequestAnimationFrame||function(){var e,t;return e=+new Date,t=e,function(r){var n;return n=+new Date,setTimeout(function(){return r((t=+new Date)-e)},17)}}(),l=function(e,t,r){var n,s,i,u;return n=f.get(e),n?p(e,n,t,r):(i=Object.getOwnPropertyNames(e),n={handlers:new Map,properties:i,values:function(){var t;t=[];for(s in e)u=e[s],o.call(i,s)>=0&&t.push(u);return t}()},f.set(e,n),p(e,n,t,r),1===f.size?a(d):void 0)},p=function(e,t,r,n){var o;return o=u.get(r),o||u.set(r,o={observed:new Map,changeRecords:[]}),o.observed.set(e,{events:n,data:t}),t.handlers.set(r,o)},h=function(e,t,r){var n,o,i,u,a,l,f,h,d,p,v;if(e.handlers.size){for(v=e.values,a=Object.getOwnPropertyNames(t),h=e.properties.slice(),d=h.length,i=0,l=a.length;l>i;i++)u=a[i],o=c(h,u),p=t[u],-1===o?(s(t,e,{name:u,type:"add",object:t},r),e.properties.push(u),v.push(p)):(f=v[o],h[o]=null,d--,(f===p?0===f&&1/f!==1/p:f===f||p===p)&&(s(t,e,{name:u,type:"update",object:t,oldValue:f},r),e.values[o]=p));for(n=h.length;d&&n--;)null!==h[n]&&(s(t,e,{name:h[n],type:"delete",object:t,oldValue:v[n]},r),e.properties.splice(n,1),e.values.splice(n,1),d--)}},s=function(e,t,r,n){t.handlers.forEach(function(t){var o;o=t.observed.get(e).events,("string"!=typeof n||-1===c(o,n))&&c(o,r.type)>-1&&t.changeRecords.push(r)})},d=function(){f.size&&(f.forEach(h),u.forEach(i),a(d))},i=function(e,t){e.changeRecords.length&&(t(e.changeRecords),e.changeRecords=[])},f=new Map,u=new Map,t.observe=function(r,n,o){if(null==o&&(o=e),!r||"object"!=typeof r&&"function"!=typeof r)throw new TypeError("Object.observe cannot observe non-object");if("function"!=typeof n)throw new TypeError("Object.observe cannot deliver to non-function");if(t.isFrozen&&t.isFrozen(n))throw new TypeError("Object.observe cannot deliver to a frozen function object");if(arguments.length>2&&"object"!=typeof o)throw new TypeError("Object.observe cannot use non-object accept list");return l(r,n,o),r},t.unobserve=function(e,t){var r,n;if(null===e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("Object.unobserve cannot unobserve non-object");if("function"!=typeof t)throw new TypeError("Object.unobserve cannot deliver to non-function");return r=u.get(t),n=void 0,r&&(n=r.observed.get(e))&&(r.observed.forEach(function(e,t){h(e.data,t)}),a(function(){i(r,t)}),1===r.observed.size&&r.observed.has(e)?u["delete"](t):r.observed["delete"](e),1===n.data.handlers.size?f["delete"](e):n.data.handlers["delete"](t)),e}}(Object,Array,this)}).call(this);