/**
 * hamsa - Object.Observe wrapper.
 * @version v0.14.20
 * @link    http://gethamsa.com
 * @author  Javi Jimenez Villar (@soyjavi) (http://soyjavi.com)
 * @license MIT
 */
(function(){"use strict";var e,t,r=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};e=["add","update","delete"],window.Hamsa=function(){function n(r,n,o){var s,i,u;null==r&&(r={}),null==o&&(o=e),this.constructor.className=this.constructor.name,this.constructor.records[this.uid=t()]=this,u=this.constructor.fields;for(i in u)s=u[i],(r[i]||null!=s["default"])&&("function"==typeof this[i]?this[i](r[i]||s["default"]):this[i]=r[i]||s["default"]);null!=n&&this.observe(n,o)}return n.records={},n.fields={},n.names=[],n.observer=void 0,n.define=function(e){var t;return this.fields=null!=e?e:{},this.records={},this.names=function(){var e;e=[];for(t in this.fields)e.push(t);return e}.call(this),this},n.all=function(){return this.find()},n.destroyAll=function(){var e;for(e in this.records)delete this.records[e];return this.records},n.find=function(e){var t,r,n,o;r=this.records,n=[];for(o in r)t=r[o],(!e||e(t))&&n.push(t);return n},n.findBy=function(e,t){var r,n,o,s;n=this.records,o=[];for(s in n)r=n[s],r[e]===t&&o.push(r);return o},n.observe=function(t,r){return null==r&&(r=e),this.observer=Object.observe(this.records,function(e){var r,n,o,s;for(o=[],r=0,n=e.length;n>r;r++)s=e[r],o.push(t(s));return o},r)},n.unobserve=function(){return Object.unobserve(this.records,this.observer)},n.prototype.observe=function(t,n){return null==n&&(n=e),this.observer=Object.observe(this,function(e){return function(n){var o,s,i,u,c;for(u=[],o=0,s=n.length;s>o;o++)c=n[o],i=c.name,r.call(e.constructor.names,i)>=0&&(delete c.object.observer,u.push(t(c)));return u}}(this),n)},n.prototype.unobserve=function(){return Object.unobserve(this.fields,this.observer)},n.prototype.destroy=function(){return delete this.constructor.records[this.uid]},n}(),t=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t,r;return t=16*Math.random()|0,r="x"===e?t:3&t|8,r.toString(16)}).toUpperCase()},Object.observe||function(t,n,o){var s,i,u,c,a,f,l,d,h,v;return e=["add","update","delete"],c=n.indexOf||function(e,t,r){return n.prototype.indexOf.call(e,t,r)},a=o.requestAnimationFrame||o.webkitRequestAnimationFrame||function(){var e,t;return e=+new Date,t=e,function(r){var n;return n=+new Date,setTimeout(function(){return r((t=+new Date)-e)},17)}}(),f=function(e,t,n){var o,s,i,u;return o=l.get(e),o?v(e,o,t,n):(i=Object.getOwnPropertyNames(e),o={handlers:new Map,properties:i,values:function(){var t;t=[];for(s in e)u=e[s],r.call(i,s)>=0&&t.push(u);return t}()},l.set(e,o),v(e,o,t,n),1===l.size?a(h):void 0)},v=function(e,t,r,n){var o;return o=u.get(r),o||u.set(r,o={observed:new Map,changeRecords:[]}),o.observed.set(e,{events:n,data:t}),t.handlers.set(r,o)},d=function(e,t,r){var n,o,i,u,a,f,l,d,h,v,b;if(e.handlers.size){for(b=e.values,a=Object.getOwnPropertyNames(t),d=e.properties.slice(),h=d.length,i=0,f=a.length;f>i;i++)u=a[i],o=c(d,u),v=t[u],-1===o?(s(t,e,{name:u,type:"add",object:t},r),e.properties.push(u),b.push(v)):(l=b[o],d[o]=null,h--,(l===v?0===l&&1/l!==1/v:l===l||v===v)&&(s(t,e,{name:u,type:"update",object:t,oldValue:l},r),e.values[o]=v));for(n=d.length;h&&n--;)null!==d[n]&&(s(t,e,{name:d[n],type:"delete",object:t,oldValue:b[n]},r),e.properties.splice(n,1),e.values.splice(n,1),h--)}},s=function(e,t,r,n){t.handlers.forEach(function(t){var o;o=t.observed.get(e).events,("string"!=typeof n||-1===c(o,n))&&c(o,r.type)>-1&&t.changeRecords.push(r)})},h=function(){l.size&&(l.forEach(d),u.forEach(i),a(h))},i=function(e,t){e.changeRecords.length&&(t(e.changeRecords),e.changeRecords=[])},l=new Map,u=new Map,t.observe=function(r,n,o){if(null==o&&(o=e),!r||"object"!=typeof r&&"function"!=typeof r)throw new TypeError("Object.observe cannot observe non-object");if("function"!=typeof n)throw new TypeError("Object.observe cannot deliver to non-function");if(t.isFrozen&&t.isFrozen(n))throw new TypeError("Object.observe cannot deliver to a frozen function object");if(arguments.length>2&&"object"!=typeof o)throw new TypeError("Object.observe cannot use non-object accept list");return f(r,n,o),r},t.unobserve=function(e,t){var r,n;if(null===e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("Object.unobserve cannot unobserve non-object");if("function"!=typeof t)throw new TypeError("Object.unobserve cannot deliver to non-function");return r=u.get(t),n=void 0,r&&(n=r.observed.get(e))&&(r.observed.forEach(function(e,t){d(e.data,t)}),a(function(){i(r,t)}),1===r.observed.size&&r.observed.has(e)?u["delete"](t):r.observed["delete"](e),1===n.data.handlers.size?l["delete"](e):n.data.handlers["delete"](t)),e}}(Object,Array,this)}).call(this);